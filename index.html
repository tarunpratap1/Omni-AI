<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OmniAI - Ultimate Knowledge Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --dark: #1f2937;
            --darker: #111827;
            --light: #f3f4f6;
            --lighter: #f9fafb;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --math: #8b5cf6;
            --science: #06b6d4;
            --sst: #f97316;
            --it: #ec4899;
            --sidebar-width: 280px;
            --header-height: 70px;
            --transition-speed: 0.3s;

            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --bg-tertiary: #374151;
            --text-primary: #f3f4f6;
            --text-secondary: #d1d5db;
            --border-color: rgba(255, 255, 255, 0.1);

            --icon-primary: #6366f1;
            --icon-secondary: #9ca3af;
            --text-primary: #f3f4f6;
            --text-secondary: #d1d5db;
            --text-tertiary: #9ca3af;
        }

        .light-mode {
            --bg-primary: #f3f4f6;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e5e7eb;
            --text-primary: #111827;
            --text-secondary: #374151;
            --border-color: rgba(0, 0, 0, 0.1);

            --icon-primary: #4f46e5;
            --icon-secondary: #6b7280;
            --text-primary: #111827;
            --text-secondary: #374151;
            --text-tertiary: #6b7280;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--darker);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            transition: transform var(--transition-speed) ease;
            z-index: 100;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 700;
            color: var(--light);
        }

        .logo i {
            color: var(--primary);
            font-size: 28px;
        }

        .new-chat-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            margin: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: background var(--transition-speed);
        }

        .new-chat-btn:hover {
            background: var(--primary-dark);
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .chat-item {
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background var(--transition-speed);
        }

        .chat-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .chat-item.active {
            background: rgba(99, 102, 241, 0.2);
        }

        .chat-item i {
            font-size: 16px;
            color: var(--primary);
        }

        .chat-item-content {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .delete-chat {
            color: var(--text-secondary);
            padding: 5px;
            border-radius: 4px;
            opacity: 0;
            transition: opacity var(--transition-speed);
        }

        .chat-item:hover .delete-chat {
            opacity: 1;
        }

        .delete-chat:hover {
            color: var(--danger);
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar-footer {
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-account {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: background var(--transition-speed);
        }

        .user-account:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            display: flex;
            flex-direction: column;
            transition: margin-left var(--transition-speed);
        }

        .top-bar {
            height: var(--header-height);
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .menu-toggle {
            display: none;
            font-size: 1.2rem;
            cursor: pointer;
            background: none;
            border: none;
            color: var(--light);
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--light);
            cursor: pointer;
            font-size: 1.2rem;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: calc(100vh - var(--header-height));
        }

        .chat-header {
            padding: 20px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.03);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            max-width: 80%;
            padding: 15px 20px;
            border-radius: 15px;
            line-height: 1.6;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .user-message {
            background: var(--primary);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .ai-message {
            background: rgba(255, 255, 255, 0.1);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .subject-tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: white;
        }

        .math-tag {
            background: var(--math);
        }

        .science-tag {
            background: var(--science);
        }

        .sst-tag {
            background: var(--sst);
        }

        .it-tag {
            background: var(--it);
        }

        .web-tag {
            background: var(--primary);
        }

        .pdf-tag {
            background: var(--warning);
        }

        .chat-input-container {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .chat-input {

            flex: 1;
            padding: 15px 20px;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.08);
            color: white;
            font-size: 1rem;
            outline: none;
        }

        .chat-input:focus {
            border-color: var(--primary);
        }

        .send-button {
            background: var(--primary);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: background var(--transition-speed);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-button:hover {
            background: var(--primary-dark);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .action-button:hover {
            background: var(--primary);
        }

        /* input area */
        .chat-input-container {
            padding: 20px;
            background: rgba(31, 41, 55, 0.95);
            position: fixed;
            bottom: 0;
            left: var(--sidebar-width);
            right: 0;
            z-index: 10;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            transition: left var(--transition-speed);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 150px;
            /* Add margin to prevent messages from being hidden behind fixed input */
        }

        /* Update for mobile view */
        @media (max-width: 968px) {
            .chat-input-container {
                left: 0;
            }

            .main-content {
                margin-left: 0;
            }

            /* Adjust margin for messages on mobile */
            .chat-messages {
                margin-bottom: 160px;
            }
        }

        /* For very small screens */
        @media (max-width: 640px) {
            .chat-input-container {
                padding: 15px;
            }

            .chat-messages {
                margin-bottom: 170px;
            }

            .action-buttons {
                flex-direction: row;
                overflow-x: auto;
                padding-bottom: 5px;
            }

            .action-button {
                flex-shrink: 0;
            }
        }

        /* Welcome screen */
        .welcome-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }

        .welcome-screen h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .welcome-screen p {
            font-size: 1.1rem;
            max-width: 700px;
            margin-bottom: 40px;
            color: #d1d5db;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
            width: 100%;
            max-width: 1000px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            transition: transform 0.3s;
            text-align: left;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
        }

        .feature-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .feature-card h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .examples {
            width: 100%;
            max-width: 1000px;
        }

        .examples h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.8rem;
        }

        .example-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .example-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .example-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        .example-card i {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .example-card h3 {
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .example-card p {
            font-size: 0.9rem;
            color: #d1d5db;
        }





        .chat-controls {
            display: flex;
            justify-content: center;

        }

        .chat-controls button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .chat-controls button:hover {
            background: var(--primary);
        }


        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--darker);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            margin-bottom: 15px;
            outline: none;
        }

        .modal-input:focus {
            border-color: var(--primary);
        }

        .modal-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
            font-weight: 600;
        }

        .modal-button:hover {
            background: var(--primary-dark);
        }

        /* Overlay for mobile */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 99;
        }

        /* Responsive Styles */
        @media (max-width: 968px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .menu-toggle {
                display: block;
            }

            .overlay.active {
                display: block;
            }

            .message {
                max-width: 90%;
            }

            .features {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 640px) {
            .action-buttons {
                flex-direction: column;
            }

            .action-button {
                width: 100%;
                justify-content: center;
            }

            .example-cards {
                grid-template-columns: 1fr;
            }

            .welcome-screen h1 {
                font-size: 2rem;
            }

            .welcome-screen p {
                font-size: 1rem;
            }
        }

        /* Scrollbar Styles */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .no-chats {
            text-align: center;
            padding: 20px;
            color: #9ca3af;
        }




        body {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-primary));
            color: var(--text-primary);
            /* ... rest of your existing body styles ... */
        }

        .sidebar {
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            /* ... rest of your existing sidebar styles ... */
        }

        .sidebar-header {
            border-bottom: 1px solid var(--border-color);
            /* ... rest of your existing sidebar-header styles ... */
        }

        .chat-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .light-mode .chat-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .top-bar {
            background: rgba(31, 41, 55, 0.8);
            border-bottom: 1px solid var(--border-color);
            /* ... rest of your existing top-bar styles ... */
        }

        .light-mode .top-bar {
            background: rgba(243, 244, 246, 0.8);
        }

        .ai-message {
            background: rgba(255, 255, 255, 0.1);
            /* ... rest of your existing ai-message styles ... */
        }

        .light-mode .ai-message {
            background: rgba(0, 0, 0, 0.05);
        }

        .chat-input-container {
            background: rgba(255, 255, 255, 0.05);
            /* ... rest of your existing chat-input-container styles ... */
        }

        .light-mode .chat-input-container {
            background: rgba(0, 0, 0, 0.03);
        }

        .chat-input {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            /* ... rest of your existing chat-input styles ... */
        }

        .action-button {
            background: rgba(255, 255, 255, 0.1);
            /* ... rest of your existing action-button styles ... */
        }

        .light-mode .action-button {
            background: rgba(0, 0, 0, 0.05);
        }

        .feature-card,
        .example-card {
            background: rgba(255, 255, 255, 0.05);
            /* ... rest of your existing card styles ... */
        }

        .light-mode .feature-card,
        .light-mode .example-card {
            background: rgba(0, 0, 0, 0.03);
        }

        .modal-content {
            background: var(--bg-secondary);
            /* ... rest of your existing modal-content styles ... */
        }




        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .light-mode ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }


        body {
            color: var(--text-primary);
            /* ... rest of your existing body styles ... */
        }

        .logo {
            color: var(--text-primary);
            /* ... rest of your existing logo styles ... */
        }

        .chat-item-content {
            color: var(--text-primary);
            /* ... rest of your existing chat-item-content styles ... */
        }

        .user-name {
            color: var(--text-primary);
        }

        .page-title {
            color: var(--text-primary);
        }

        .welcome-screen p {
            color: var(--text-secondary);
        }

        .feature-card p {
            color: var(--text-secondary);
        }

        .example-card p {
            color: var(--text-secondary);
        }

        .no-chats {
            color: var(--text-tertiary);
        }




        .logo i {
            color: var(--icon-primary);
        }

        .chat-item i {
            color: var(--icon-primary);
        }

        .delete-chat {
            color: var(--icon-secondary);
        }

        .delete-chat:hover {
            color: var(--danger);
        }

        .feature-card i {
            color: var(--icon-primary);
        }

        .example-card i {
            color: var(--icon-primary);
        }

        .theme-toggle {
            color: var(--icon-primary);
        }

        .menu-toggle {
            color: var(--icon-primary);
        }

        .user-avatar {
            background: var(--icon-primary);
        }

        .user-avatar i {
            color: white;
        }




        .action-button {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
            /* ... rest of your existing action-button styles ... */
        }

        .light-mode .action-button {
            background: rgba(0, 0, 0, 0.05);
        }

        .action-button:hover {
            color: white;
            background: var(--primary);
        }



        .modal-input {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
        }

        .light-mode .modal-input {
            background: rgba(0, 0, 0, 0.03);
        }

        .close-button {
            color: var(--text-primary);
        }



        .chat-controls button {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .light-mode .chat-controls button {
            background: rgba(0, 0, 0, 0.05);
            color: var(--text-primary);
        }

        .chat-controls button:hover {
            background: var(--primary);
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <span>OmniAI</span>
                </div>
            </div>

            <button class="new-chat-btn" id="new-chat-btn">
                <i class="fas fa-plus"></i>
                New Chat
            </button>

            <div class="chat-history" id="chat-history">
                <div class="no-chats">No chats yet</div>
            </div>

            <div class="sidebar-footer">
                <div class="user-account">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-name">Tarun Pratap Singh</div>
                </div>
            </div>
        </div>

        <!-- Overlay for mobile -->
        <div class="overlay" id="overlay"></div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="top-bar">
                <button class="menu-toggle" id="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="page-title">OmniAI</div>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>

            <div class="chat-container">
                <div class="chat-messages" id="chat-messages">
                    <div class="welcome-screen">
                        <h1>Your Ultimate Knowledge Assistant</h1>
                        <p>OmniAI is a powerful artificial intelligence that can answer any question, solve numerical
                            problems, summarize PDFs, and learn from web resources in real-time.</p>

                        <div class="features">
                            <div class="feature-card">
                                <i class="fas fa-calculator"></i>
                                <h3>Numerical Problem Solving</h3>
                                <p>Solve complex mathematical problems with step-by-step explanations and detailed
                                    working.</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-file-pdf"></i>
                                <h3>PDF Analysis</h3>
                                <p>Upload PDF documents and get comprehensive summaries, key points extraction, and
                                    analysis.</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-globe"></i>
                                <h3>Web Integration</h3>
                                <p>Access real-time information from the web to provide the most current and accurate
                                    answers.</p>
                            </div>
                        </div>

                        <div class="examples">
                            <h2>Example Questions</h2>
                            <div class="example-cards">
                                <div class="example-card"
                                    data-question="Solve the equation: 3x + 5 = 11. What is the value of x?">
                                    <i class="fas fa-calculator"></i>
                                    <h3>Mathematics</h3>
                                    <p>Solve the equation: 3x + 5 = 11. What is the value of x?</p>
                                </div>
                                <div class="example-card" data-question="What is the current population of India?">
                                    <i class="fas fa-globe-asia"></i>
                                    <h3>Current Affairs</h3>
                                    <p>What is the current population of India?</p>
                                </div>
                                <div class="example-card" data-question="Explain quantum computing in simple terms">
                                    <i class="fas fa-microchip"></i>
                                    <h3>Technology</h3>
                                    <p>Explain quantum computing in simple terms</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <div class="input-group">
                        <input type="text" id="user-input" class="chat-input"
                            placeholder="Ask about any subject, upload a PDF, or request web research..."
                            autocomplete="off">
                        <button id="send-button" class="send-button"><i class="fas fa-paper-plane"></i></button>
                    </div>
                    <div class="action-buttons">
                        <!-- Add this to your action-buttons div -->
                        <div class="action-buttons">
                            <!-- <input type="file" id="pdfInput" accept=".pdf" style="display: none;">
                            <button class="action-button" id="pdf-btn">
                                <i class="fas fa-file-pdf"></i> PDF Analysis
                            </button> -->
                        </div>
                        <!-- <button class="action-button" id="web-research-btn">
                            <i class="fas fa-search"></i> Web Research
                        </button>
                        <button class="action-button" id="numerical-btn">
                            <i class="fas fa-calculator"></i> Numerical Problem
                        </button> -->
                        <!-- <input type="file" id="pdfInput" accept=".pdf">
                        <button class="action-button" id="pdf-btn">
                            <i class="fas fa-file-pdf"></i> PDF Analysis
                        </button> -->

                        <div class="chat-controls">
                            <button id="clearChatBtn"><i class="fas fa-trash"></i> Clear Chat</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Web Research Modal -->
        <!-- <div class="modal" id="web-research-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Web Research</h2>
                    <button class="close-button">&times;</button>
                </div>
                <input type="text" class="modal-input" id="web-query" placeholder="Enter your research topic...">
                <button class="modal-button" id="start-research">Start Research</button>
            </div>
        </div> -->

        <!-- Numerical Problem Modal -->
        <!-- <div class="modal" id="numerical-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Numerical Problem</h2>
                    <button class="close-button">&times;</button>
                </div>
                <textarea class="modal-input" id="numerical-problem" placeholder="Enter your numerical problem..."
                    rows="4"></textarea>
                <button class="modal-button" id="solve-numerical">Solve Problem</button>
            </div>
        </div> -->

        <!-- PDF Analysis Modal -->
        <!-- <div class="modal" id="pdf-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>PDF Analysis</h2>
                    <button class="close-button">&times;</button>
                </div>
                <p style="margin-bottom: 15px;">Upload a PDF document for analysis and summarization:</p>
                <input type="file" id="pdf-upload" accept=".pdf" style="margin-bottom: 15px;">
                <button class="modal-button" id="analyze-pdf">Analyze PDF</button>
            </div>
        </div>
    </div> -->

        <script defer>
            // // DOM Elements
            // const sidebar = document.getElementById('sidebar');
            // const menuToggle = document.getElementById('menu-toggle');
            // const overlay = document.getElementById('overlay');
            // const newChatBtn = document.getElementById('new-chat-btn');
            // const chatHistory = document.getElementById('chat-history');
            // const chatMessages = document.getElementById('chat-messages');
            // const userInput = document.getElementById('user-input');
            // const sendButton = document.getElementById('send-button');
            // const themeToggle = document.getElementById('theme-toggle');
            // const exampleCards = document.querySelectorAll('.example-card');

            // // Modals and buttons
            // const webResearchModal = document.getElementById('web-research-modal');
            // const numericalModal = document.getElementById('numerical-modal');
            // const pdfModal = document.getElementById('pdf-modal');
            // const webResearchBtn = document.getElementById('web-research-btn');
            // const numericalBtn = document.getElementById('numerical-btn');
            // const pdfBtn = document.getElementById('pdf-btn');
            // const closeButtons = document.querySelectorAll('.close-button');




            // // State management
            // let currentChatId = null;
            // let chats = JSON.parse(localStorage.getItem('omniAI-chats')) || [];
            // let isDarkMode = localStorage.getItem('omniAI-darkMode') !== 'false';

            // // Initialize the application
            // // function initApp() {
            // //     // Set theme based on saved preference
            // //     document.body.classList.toggle('light-mode', !isDarkMode);
            // //     updateThemeIcon();

            // //     // Load chat history
            // //     renderChatHistory();

            // //     // If there are existing chats, load the first one
            // //     if (chats.length > 0) {
            // //         loadChat(chats[0].id);
            // //     }
            // // }

            // // Initialize the application
            // function initApp() {
            //     // Set theme based on saved preference
            //     const savedTheme = localStorage.getItem('omniAI-theme');
            //     const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            //     if (savedTheme === 'light' || (!savedTheme && !systemPrefersDark)) {
            //         document.body.classList.add('light-mode');
            //     }

            //     updateThemeIcon();

            //     // ... rest of your existing initApp code ...
            // }

            // // Toggle sidebar on mobile
            // function setupSidebar() {
            //     menuToggle.addEventListener('click', () => {
            //         sidebar.classList.toggle('active');
            //         overlay.classList.toggle('active');
            //     });

            //     overlay.addEventListener('click', () => {
            //         sidebar.classList.remove('active');
            //         overlay.classList.remove('active');
            //     });
            // }

            // // Theme toggle functionality

            // // Chat management functions

            // function loadChat(chatId) {
            //     currentChatId = chatId;
            //     const chat = chats.find(chat => chat.id === chatId);

            //     if (!chat) return;

            //     // Update UI to show this chat is active
            //     document.querySelectorAll('.chat-item').forEach(item => {
            //         item.classList.remove('active');
            //         if (item.dataset.chatId === chatId) {
            //             item.classList.add('active');
            //         }
            //     });

            //     // Clear current messages and render chat messages
            //     chatMessages.innerHTML = '';

            //     if (chat.messages.length === 0) {
            //         // Add welcome message if chat is empty
            //         addMessage("Hello! I'm OmniAI, your personal knowledge assistant. I can answer any question, solve numerical problems, summarize PDFs, and learn from web resources. What would you like to explore today?", false, "it");
            //     } else {
            //         // Render all messages in this chat
            //         chat.messages.forEach(msg => {
            //             addMessage(msg.text, msg.isUser, msg.subject);
            //         });
            //     }

            //     // Scroll to bottom of chat
            //     chatMessages.scrollTop = chatMessages.scrollHeight;
            // }

            // function deleteChat(chatId, event) {
            //     if (event) event.stopPropagation();

            //     // Confirm deletion
            //     if (!confirm("Are you sure you want to delete this chat?")) return;

            //     // Remove chat from array
            //     chats = chats.filter(chat => chat.id !== chatId);
            //     saveChats();

            //     // If we deleted the current chat, load another one or create new
            //     if (currentChatId === chatId) {
            //         if (chats.length > 0) {
            //             loadChat(chats[0].id);
            //         } else {
            //             currentChatId = null;
            //             chatMessages.innerHTML = '';
            //             showWelcomeScreen();
            //         }
            //     }

            //     // Re-render chat history
            //     renderChatHistory();
            // }

            // function saveChats() {
            //     localStorage.setItem('omniAI-chats', JSON.stringify(chats));
            // }

            // function renderChatHistory() {
            //     chatHistory.innerHTML = '';

            //     if (chats.length === 0) {
            //         chatHistory.innerHTML = '<div class="no-chats">No chats yet</div>';
            //         return;
            //     }

            //     chats.forEach(chat => {
            //         const chatItem = document.createElement('div');
            //         chatItem.className = `chat-item ${chat.id === currentChatId ? 'active' : ''}`;
            //         chatItem.dataset.chatId = chat.id;

            //         chatItem.innerHTML = `
            //         <i class="fas fa-message"></i>
            //         <div class="chat-item-content">${chat.title}</div>
            //         <button class="delete-chat"><i class="fas fa-trash"></i></button>
            //         `;

            //         chatItem.addEventListener('click', () => loadChat(chat.id));
            //         chatItem.querySelector('.delete-chat').addEventListener('click', (e) => deleteChat(chat.id, e));

            //         chatHistory.appendChild(chatItem);
            //     });
            // }

            // function showWelcomeScreen() {
            //     const welcomeScreen = document.createElement('div');
            //     welcomeScreen.className = 'welcome-screen';
            //     welcomeScreen.innerHTML = `
            //     <h1>Your Ultimate Knowledge Assistant</h1>
            //     <p>OmniAI is a powerful artificial intelligence that can answer any question, solve numerical problems, summarize PDFs, and learn from web resources in real-time.</p>

            //     <div class="features">
            //         <div class="feature-card">
            //             <i class="fas fa-calculator"></i>
            //             <h3>Numerical Problem Solving</h3>
            //             <p>Solve complex mathematical problems with step-by-step explanations and detailed working.</p>
            //             </div>
            //             <div class="feature-card">
            //                 <i class="fas fa-file-pdf"></i>
            //                 <h3>PDF Analysis</h3>
            //                 <p>Upload PDF documents and get comprehensive summaries, key points extraction, and analysis.</p>
            //                 </div>
            //                 <div class="feature-card">
            //                 <i class="fas fa-globe"></i>
            //                 <h3>Web Integration</h3>
            //                 <p>Access real-time information from the web to provide the most current and accurate answers.</p>
            //                 </div>
            //                 </div>

            //                 <div class="examples">
            //                     <h2>Example Questions</h2>
            //                     <div class="example-cards">
            //                         <div class="example-card" data-question="Solve the equation: 3x + 5 = 11. What is the value of x?">
            //                             <i class="fas fa-calculator"></i>
            //                             <h3>Mathematics</h3>
            //                             <p>Solve the equation: 3x + 5 = 11. What is the value of x?</p>
            //                             </div>
            //                             <div class="example-card" data-question="What is the current population of India?">
            //                                 <i class="fas fa-globe-asia"></i>
            //                                 <h3>Current Affairs</h3>
            //                 <p>What is the current population of India?</p>
            //             </div>
            //             <div class="example-card" data-question="Explain quantum computing in simple terms">
            //                 <i class="fas fa-microchip"></i>
            //                 <h3>Technology</h3>
            //                 <p>Explain quantum computing in simple terms</p>
            //                 </div>
            //                 </div>
            //                 </div>
            //                 `;

            //     chatMessages.innerHTML = '';
            //     chatMessages.appendChild(welcomeScreen);

            //     // Add event listeners to example cards
            //     document.querySelectorAll('.example-card').forEach(card => {
            //         card.addEventListener('click', function () {
            //             if (!currentChatId) createNewChat();
            //             const question = this.getAttribute('data-question');
            //             userInput.value = question;
            //             userInput.focus();
            //         });
            //     });
            // }

            // // Message handling functions
            // function addMessage(text, isUser, subject) {
            //     const messageDiv = document.createElement('div');
            //     messageDiv.classList.add('message');
            //     messageDiv.classList.add(isUser ? 'user-message' : 'ai-message');

            //     if (!isUser && subject) {
            //         const subjectTag = document.createElement('span');
            //         subjectTag.classList.add('subject-tag');
            //         subjectTag.classList.add(`${subject}-tag`);
            //         subjectTag.textContent = subject.charAt(0).toUpperCase() + subject.slice(1);
            //         messageDiv.appendChild(subjectTag);
            //     }

            //     // Preserve line breaks in the response
            //     const lines = text.split('\n');
            //     lines.forEach((line, index) => {
            //         if (line.trim() !== '') {
            //             const p = document.createElement('p');
            //             p.textContent = line;
            //             if (index > 0) p.style.marginTop = '10px';
            //             messageDiv.appendChild(p);
            //         }
            //     });

            //     chatMessages.appendChild(messageDiv);

            //     // Scroll to bottom
            //     chatMessages.scrollTop = chatMessages.scrollHeight;

            //     // If this is part of a chat, save it
            //     if (currentChatId) {
            //         const chat = chats.find(chat => chat.id === currentChatId);
            //         if (chat) {
            //             chat.messages.push({
            //                 text,
            //                 isUser,
            //                 subject,
            //                 timestamp: new Date().toISOString()
            //             });

            //             // Update chat title if it's the first message
            //             if (chat.messages.length === 1 && !isUser) {
            //                 chat.title = text.substring(0, 30) + (text.length > 30 ? '...' : '');
            //             }

            //             saveChats();
            //             renderChatHistory();
            //         }
            //     }
            // }


            // async function sendMessageText(message) {
            //     addMessage(message, true);
            //     userInput.value = "";

            //     // Show typing indicator
            //     const typingDiv = document.createElement("div");
            //     typingDiv.classList.add("message", "ai-message");
            //     typingDiv.innerHTML = `<p><em>OmniAI is typing...</em></p>`;
            //     chatMessages.appendChild(typingDiv);
            //     chatMessages.scrollTop = chatMessages.scrollHeight;

            //     // Call backend Gemini API
            //     const responseText = await getAIResponse(message);

            //     // Remove typing indicator
            //     typingDiv.remove();

            //     // Add AI response
            //     addMessage(responseText, false, "it");
            // }


            // // AI Response simulation (would connect to real API in production)
            // // AI Response (via backend Gemini API)
            // // AI Response (via backend Gemini API)
            // // Fetch AI response from backend (Gemini API)
            // // Send chat message
            // async function getAIResponse(userMessage) {
            //     try {
            //         const res = await fetch("http://localhost:5000/api/chat", {
            //             method: "POST",
            //             headers: { "Content-Type": "application/json" },
            //             body: JSON.stringify({ message: userMessage })
            //         });
            //         const data = await res.json();
            //         return data.reply;
            //     } catch (err) {
            //         console.error(err);
            //         return "⚠️ Unable to connect to AI server.";
            //     }
            // }






            // // Modal functionality
            // function setupModals() {
            //     // Open modals
            //     webResearchBtn.addEventListener('click', () => webResearchModal.style.display = 'flex');
            //     numericalBtn.addEventListener('click', () => numericalModal.style.display = 'flex');
            //     pdfBtn.addEventListener('click', () => pdfModal.style.display = 'flex');

            //     // Close modals
            //     closeButtons.forEach(button => {
            //         button.addEventListener('click', () => {
            //             webResearchModal.style.display = 'none';
            //             numericalModal.style.display = 'none';
            //             pdfModal.style.display = 'none';
            //         });
            //     });

            //     // Close modals when clicking outside
            //     window.addEventListener('click', (event) => {
            //         if (event.target === webResearchModal) webResearchModal.style.display = 'none';
            //         if (event.target === numericalModal) numericalModal.style.display = 'none';
            //         if (event.target === pdfModal) pdfModal.style.display = 'none';
            //     });

            //     // Start research button
            //     // document.getElementById('start-research').addEventListener('click', () => {
            //     //     const query = document.getElementById('web-query').value;
            //     //     if (query) {
            //     //         if (!currentChatId) createNewChat();
            //     //         addMessage(`Web research: ${query}`, true);
            //     //         webResearchModal.style.display = 'none';

            //     //         setTimeout(() => {
            //     //             const response = performWebResearch(query);
            //     //             addMessage(response.text, false, response.subject);
            //     //         }, 1500);
            //     //     }
            //     // });

            //     // Solve numerical button
            //     // document.getElementById('solve-numerical').addEventListener('click', () => {
            //     //     const problem = document.getElementById('numerical-problem').value;
            //     //     if (problem) {
            //     //         if (!currentChatId) createNewChat();
            //     //         addMessage(`Numerical problem: ${problem}`, true);
            //     //         numericalModal.style.display = 'none';

            //     //         setTimeout(() => {
            //     //             const response = solveNumerical(problem);
            //     //             addMessage(response.text, false, response.subject);
            //     //         }, 1500);
            //     //     }
            //     // });

            //     // Analyze PDF button
            //     //     document.getElementById('analyze-pdf').addEventListener('click', () => {
            //     //         const fileInput = document.getElementById('pdf-upload');
            //     //         if (fileInput.files.length > 0) {
            //     //             if (!currentChatId) createNewChat();
            //     //             addMessage(`PDF analysis request: ${fileInput.files[0].name}`, true);
            //     //             pdfModal.style.display = 'none';

            //     //             setTimeout(() => {
            //     //                 const response = analyzePDF();
            //     //                 addMessage(response.text, false, response.subject);
            //     //             }, 2000);
            //     //         }
            //     //     });
            //     // }

            //     // Specialized functions (would connect to real APIs in production)
            //     // function performWebResearch(query) {
            //     //     return {
            //     //         text: `I've researched "${query}" and found the following information:\n\nAccording to recent sources, this topic is currently being discussed across various platforms. The general consensus among experts is that this is an important area of study with significant developments in recent years.\n\nKey findings from my research:\n- Multiple studies confirm the importance of this topic\n- Recent advancements have improved our understanding\n- Future developments are expected to continue at a rapid pace\n\nFor the most current and specific information, I would recommend consulting specialized databases or recent publications on this subject.`,
            //     //         subject: "web"
            //     //     };
            //     // }

            //     // function solveNumerical(problem) {
            //     //     return {
            //     //         text: `I've analyzed your numerical problem: "${problem}"\n\nSolution:\nBased on mathematical principles, I can provide a step-by-step solution to this problem.\n\nStep 1: Identify the known values and unknowns\nStep 2: Apply the appropriate formula or method\nStep 3: Calculate the intermediate values\nStep 4: Arrive at the final solution\n\nFor a detailed solution with actual computations, I would need more specific values and parameters. Please provide the complete problem with all known values, and I'll generate a comprehensive solution.`,
            //     //         subject: "math"
            //     //     };
            //     // }

            //     // function analyzePDF() {
            //     //     return {
            //     //         text: "I've analyzed the PDF document you uploaded. Here's a summary of the key points:\n\n- The document appears to be well-structured with clear sections\n- Main topics covered include relevant subject matter\n- Key findings and conclusions are presented logically\n\nFor a more detailed analysis, please ensure the PDF contains selectable text rather than scanned images. In a production environment, this feature would use OCR technology to extract text from scanned documents and advanced NLP techniques to provide comprehensive summaries.",
            //     //         subject: "pdf"
            //     //     };
            //     // }

            //     // Event listeners setup

            //     // Initialize the application when DOM is loaded
            //     document.addEventListener('DOMContentLoaded', () => {
            //         initApp();
            //         setupSidebar();
            //         setupThemeToggle();
            //         setupModals();
            //         setupEventListeners();
            //     });



            //     // clear chat

            //     // Clear chat functionality




            //     // dark mode
            //     // Theme toggle functionality
            //     // function setupThemeToggle() {
            //     //     themeToggle.addEventListener('click', toggleTheme);

            //     //     // Initialize theme based on saved preference or system preference
            //     //     const savedTheme = localStorage.getItem('omniAI-theme');
            //     //     const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            //     //     if (savedTheme === 'light' || (!savedTheme && !systemPrefersDark)) {
            //     //         document.body.classList.add('light-mode');
            //     //     }

            //     //     updateThemeIcon();
            //     // }

            //     // function toggleTheme() {
            //     //     document.body.classList.toggle('light-mode');
            //     //     const isLightMode = document.body.classList.contains('light-mode');
            //     //     localStorage.setItem('omniAI-theme', isLightMode ? 'light' : 'dark');
            //     //     updateThemeIcon();
            //     // }

            //     // function updateThemeIcon() {
            //     //     const isLightMode = document.body.classList.contains('light-mode');
            //     //     themeToggle.innerHTML = isLightMode ?
            //     //         '<i class="fas fa-moon"></i>' :
            //     //         '<i class="fas fa-sun"></i>';
            //     // }

            //     // ===== PDF Summarize =====
            //     // const file = document.getElementById("pdfInput").files[0];
            //     // const formData = new FormData();
            //     // formData.append("pdf", file);  // this uploads to backend
            //     // fetch("http://localhost:5000/api/pdf-summary", { method: "POST", body: formData });

            //     // document.getElementById("pdfBtn").addEventListener("click", async () => {
            //     //     const fileInput = document.getElementById("pdfInput");
            //     //     const file = fileInput.files[0];
            //     //     if (!file) return alert("Please upload a PDF first!");

            //     //     const formData = new FormData();
            //     //     formData.append("pdf", file);  // <-- MUST be "pdf"

            //     //     const res = await fetch("http://localhost:5000/api/pdf-summary", {
            //     //         method: "POST",
            //     //         body: formData
            //     //     });

            //     //     const data = await res.json();
            //     //     addMessage(data.reply);
            //     // });

            //     // function createNewChat() {
            //     //     const chatId = Date.now().toString();
            //     //     const newChat = {
            //     //         id: chatId,
            //     //         title: "New Chat",
            //     //         messages: [],
            //     //         createdAt: new Date().toISOString()
            //     //     };

            //     //     chats.unshift(newChat);
            //     //     saveChats();
            //     //     renderChatHistory();
            //     //     loadChat(chatId);

            //     // Hide welcome screen if shown
            //     const welcomeScreen = document.querySelector('.welcome-screen');
            //     if (welcomeScreen) {
            //         welcomeScreen.style.display = 'none';
            //     }

            //     // Close sidebar on mobile after selection
            //     if (window.innerWidth < 968) {
            //         sidebar.classList.remove('active');
            //         overlay.classList.remove('active');
            //     }
            // }

            // const clearChatBtn = document.getElementById("clearChatBtn");
            // clearChatBtn.addEventListener("click", () => {
            //     chatMessages.innerHTML = ""; // remove all messages
            //     addMessage("Chat cleared! Start fresh.", false, "");
            // });
            // function setupEventListeners() {
            //     // Send message on button click or Enter key
            //     sendButton.addEventListener('click', sendMessage);
            //     userInput.addEventListener('keypress', (e) => {
            //         if (e.key === 'Enter') sendMessage();
            //     });

            //     // New chat button
            //     newChatBtn.addEventListener('click', createNewChat);

            //     // Example cards
            //     exampleCards.forEach(card => {
            //         card.addEventListener('click', function () {
            //             const question = this.getAttribute('data-question');
            //             userInput.value = question;
            //             userInput.focus();
            //         });
            //     });
            // }
            // function createNewChat() {
            //     const chatId = Date.now().toString();
            //     const newChat = {
            //         id: chatId,
            //         title: "New Chat",
            //         messages: [],
            //         createdAt: new Date().toISOString()
            //     };

            //     chats.unshift(newChat);
            //     saveChats();
            //     renderChatHistory();
            //     loadChat(chatId);

            //     // Hide welcome screen if shown
            //     const welcomeScreen = document.querySelector('.welcome-screen');
            //     if (welcomeScreen) {
            //         welcomeScreen.style.display = 'none';
            //     }

            //     // Close sidebar on mobile after selection
            //     if (window.innerWidth < 968) {
            //         sidebar.classList.remove('active');
            //         overlay.classList.remove('active');
            //     }
            // }
            // function sendMessage() {
            //     const message = userInput.value.trim();
            //     if (!message) return;

            //     // Create a new chat if none exists
            //     if (!currentChatId) {
            //         createNewChat();
            //         // Small delay to allow chat creation
            //         setTimeout(() => sendMessageText(message), 100);
            //     } else {
            //         sendMessageText(message);
            //     }
            // }
            // function setupThemeToggle() {
            //     themeToggle.addEventListener('click', toggleTheme);
            // }

            // function toggleTheme() {
            //     isDarkMode = !isDarkMode;
            //     document.body.classList.toggle('light-mode', !isDarkMode);
            //     localStorage.setItem('omniAI-darkMode', isDarkMode);
            //     updateThemeIcon();
            // }

            // function updateThemeIcon() {
            //     themeToggle.innerHTML = isDarkMode ?
            //         '<i class="fas fa-sun"></i>' :
            //         '<i class="fas fa-moon"></i>';
            // }






            //   // ================= Utility =================
            //   function addMessage(message, type = "ai") {
            //     const chatBox = document.getElementById("chatContainer");
            //     const div = document.createElement("div");
            //     div.className = `message ${type}-message`;

            //     // Special code box detection
            //     if (message.includes("```")) {
            //       const codeBlock = document.createElement("pre");
            //       codeBlock.className = "code-block";
            //       codeBlock.textContent = message.replace(/```[a-z]*\n?/g, "").replace(/```/g, "");
            //       div.appendChild(codeBlock);
            //     } else {
            //       div.innerHTML = `<p>${message}</p>`;
            //     }

            //     chatBox.appendChild(div);
            //     chatBox.scrollTop = chatBox.scrollHeight;
            //   }

            //   async function getAIResponse(userMessage) {
            //     try {
            //       const res = await fetch("http://localhost:5000/api/chat", {
            //         method: "POST",
            //         headers: { "Content-Type": "application/json" },
            //         body: JSON.stringify({ message: userMessage })
            //       });
            //       const data = await res.json();
            //       return data.reply;
            //     } catch (err) {
            //       console.error("Fetch error:", err);
            //       return "⚠️ Unable to connect to AI server.";
            //     }
            //   }

            //   // ================= Core Functions =================
            //   function initApp() {
            //     addMessage("👋 Welcome to NexusAI! Ask me anything...", "ai");
            //   }

            //   function createNewChat() {
            //     const chatList = document.getElementById("chatList");
            //     const li = document.createElement("li");
            //     li.className = "chat-item";
            //     li.textContent = "Chat " + (chatList.children.length + 1);

            //     li.addEventListener("click", () => {
            //       document.querySelectorAll(".chat-item").forEach(item => item.classList.remove("active"));
            //       li.classList.add("active");

            //       // Clear chat container
            //       const chatBox = document.getElementById("chatContainer");
            //       chatBox.innerHTML = "";
            //       addMessage("👋 New chat started!", "ai");
            //     });

            //     chatList.appendChild(li);

            //     // Auto-switch to new chat
            //     li.click();
            //   }

            //   function setupSidebar() {
            //     const sidebarToggle = document.getElementById("menuToggle");
            //     const sidebar = document.getElementById("nav");
            //     sidebarToggle.addEventListener("click", () => {
            //       sidebar.classList.toggle("active");
            //     });
            //   }

            //   function setupThemeToggle() {
            //     const darkModeBtn = document.getElementById("darkModeBtn");
            //     if (darkModeBtn) {
            //       darkModeBtn.addEventListener("click", () => {
            //         document.body.classList.toggle("dark-mode");
            //       });
            //     }
            //   }

            //   function setupModals() {
            //     // if you had modal logic, keep it here
            //   }

            //   function setupEventListeners() {
            //     const sendBtn = document.getElementById("sendButton");
            //     const userInput = document.getElementById("userInput");
            //     const newChatBtn = document.getElementById("newChatBtn");

            //     // Send message
            //     if (sendBtn) {
            //       sendBtn.addEventListener("click", async () => {
            //         const message = userInput.value.trim();
            //         if (!message) return;

            //         addMessage(message, "user");
            //         userInput.value = "";

            //         const typingDiv = document.createElement("div");
            //         typingDiv.classList.add("message", "ai-message");
            //         typingDiv.innerHTML = `<p><em>NexusAI is typing...</em></p>`;
            //         document.getElementById("chatContainer").appendChild(typingDiv);

            //         const response = await getAIResponse(message);
            //         typingDiv.remove();
            //         addMessage(response, "ai");
            //       });
            //     }

            //     // Enter key
            //     if (userInput) {
            //       userInput.addEventListener("keypress", (e) => {
            //         if (e.key === "Enter") sendBtn.click();
            //       });
            //     }

            //     // New chat
            //     if (newChatBtn) {
            //       newChatBtn.addEventListener("click", () => {
            //         createNewChat();
            //       });
            //     }
            //   }

            //   // ================= Init =================
            //   document.addEventListener("DOMContentLoaded", () => {
            //     initApp();
            //     setupSidebar();
            //     setupThemeToggle();
            //     setupModals();
            //     setupEventListeners();
            //   });




            // DOM Elements
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menu-toggle');
            const overlay = document.getElementById('overlay');
            const newChatBtn = document.getElementById('new-chat-btn');
            const chatHistory = document.getElementById('chat-history');
            const chatMessages = document.getElementById('chat-messages');
            const userInput = document.getElementById('user-input');
            const sendButton = document.getElementById('send-button');
            const themeToggle = document.getElementById('theme-toggle');
            const exampleCards = document.querySelectorAll('.example-card');
            const clearChatBtn = document.getElementById('clearChatBtn');

            // State management
            let currentChatId = null;
            let chats = JSON.parse(localStorage.getItem('omniAI-chats')) || [];
            let isDarkMode = localStorage.getItem('omniAI-darkMode') !== 'false';

            // Initialize the application
            function initApp() {
                // Set theme based on saved preference
                const savedTheme = localStorage.getItem('omniAI-theme');
                const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                if (savedTheme === 'light' || (!savedTheme && !systemPrefersDark)) {
                    document.body.classList.add('light-mode');
                }

                updateThemeIcon();
                renderChatHistory();

                // If there are existing chats, load the first one
                if (chats.length > 0) {
                    loadChat(chats[0].id);
                }
            }

            // Toggle sidebar on mobile
            function setupSidebar() {
                menuToggle.addEventListener('click', () => {
                    sidebar.classList.toggle('active');
                    overlay.classList.toggle('active');
                });

                overlay.addEventListener('click', () => {
                    sidebar.classList.remove('active');
                    overlay.classList.remove('active');
                });
            }

            // Theme toggle functionality
            function setupThemeToggle() {
                themeToggle.addEventListener('click', toggleTheme);
            }

            function toggleTheme() {
                document.body.classList.toggle('light-mode');
                const isLightMode = document.body.classList.contains('light-mode');
                localStorage.setItem('omniAI-theme', isLightMode ? 'light' : 'dark');
                updateThemeIcon();
            }

            function updateThemeIcon() {
                const isLightMode = document.body.classList.contains('light-mode');
                themeToggle.innerHTML = isLightMode ?
                    '<i class="fas fa-moon"></i>' :
                    '<i class="fas fa-sun"></i>';
            }

            // Chat management functions
            function createNewChat() {
                const chatId = Date.now().toString();
                const newChat = {
                    id: chatId,
                    title: "New Chat",
                    messages: [],
                    createdAt: new Date().toISOString()
                };

                chats.unshift(newChat);
                saveChats();
                renderChatHistory();
                loadChat(chatId);

                // Hide welcome screen if shown
                const welcomeScreen = document.querySelector('.welcome-screen');
                if (welcomeScreen) {
                    welcomeScreen.style.display = 'none';
                }

                // Close sidebar on mobile after selection
                if (window.innerWidth < 968) {
                    sidebar.classList.remove('active');
                    overlay.classList.remove('active');
                }

                return chatId;
            }

            function loadChat(chatId) {
                currentChatId = chatId;
                const chat = chats.find(chat => chat.id === chatId);

                if (!chat) return;

                // Update UI to show this chat is active
                document.querySelectorAll('.chat-item').forEach(item => {
                    item.classList.remove('active');
                    if (item.dataset.chatId === chatId) {
                        item.classList.add('active');
                    }
                });

                // Clear current messages and render chat messages
                chatMessages.innerHTML = '';

                if (chat.messages.length === 0) {
                    // Add welcome message if chat is empty
                    addMessage("Hello! I'm OmniAI, your personal knowledge assistant. I can answer any question, solve numerical problems, summarize PDFs, and learn from web resources. What would you like to explore today?", false, "it");
                } else {
                    // Render all messages in this chat
                    chat.messages.forEach(msg => {
                        addMessage(msg.text, msg.isUser, msg.subject);
                    });
                }

                // Scroll to bottom of chat
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function deleteChat(chatId, event) {
                if (event) event.stopPropagation();

                // Confirm deletion
                if (!confirm("Are you sure you want to delete this chat?")) return;

                // Remove chat from array
                chats = chats.filter(chat => chat.id !== chatId);
                saveChats();

                // If we deleted the current chat, load another one or create new
                if (currentChatId === chatId) {
                    if (chats.length > 0) {
                        loadChat(chats[0].id);
                    } else {
                        currentChatId = null;
                        chatMessages.innerHTML = '';
                        showWelcomeScreen();
                    }
                }

                // Re-render chat history
                renderChatHistory();
            }

            function saveChats() {
                localStorage.setItem('omniAI-chats', JSON.stringify(chats));
            }

            function renderChatHistory() {
                chatHistory.innerHTML = '';

                if (chats.length === 0) {
                    chatHistory.innerHTML = '<div class="no-chats">No chats yet</div>';
                    return;
                }

                chats.forEach(chat => {
                    const chatItem = document.createElement('div');
                    chatItem.className = `chat-item ${chat.id === currentChatId ? 'active' : ''}`;
                    chatItem.dataset.chatId = chat.id;

                         chatItem.innerHTML = `
                    <i class="fas fa-message"></i>
                    <div class="chat-item-content">${chat.title}</div>
                    <div class="delete-chat" data-chat-id="${chat.id}">
                        <i class="fas fa-trash"></i>
                    </div>
                `;

                    chatItem.addEventListener('click', () => loadChat(chat.id));
                    chatItem.querySelector('.delete-chat').addEventListener('click', (e) => deleteChat(chat.id, e));

                    chatHistory.appendChild(chatItem);
                });
            }

            function showWelcomeScreen() {
                const welcomeScreen = document.createElement('div');
                welcomeScreen.className = 'welcome-screen';
                welcomeScreen.innerHTML = `
                <h1>Your Ultimate Knowledge Assistant</h1>
                <p>OmniAI is a powerful artificial intelligence that can answer any question, solve numerical problems, summarize PDFs, and learn from web resources in real-time.</p>
                
                <div class="features">
                    <div class="feature-card">
                        <i class="fas fa-calculator"></i>
                        <h3>Numerical Problem Solving</h3>
                        <p>Solve complex mathematical problems with step-by-step explanations and detailed working.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-file-pdf"></i>
                        <h3>PDF Analysis</h3>
                        <p>Upload PDF documents and get comprehensive summaries, key points extraction, and analysis.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-globe"></i>
                        <h3>Web Integration</h3>
                        <p>Access real-time information from the web to provide the most current and accurate answers.</p>
                    </div>
                </div>
                
                <div class="examples">
                    <h2>Example Questions</h2>
                    <div class="example-cards">
                        <div class="example-card" data-question="Solve the equation: 3x + 5 = 11. What is the value of x?">
                            <i class="fas fa-calculator"></i>
                            <h3>Mathematics</h3>
                            <p>Solve the equation: 3x + 5 = 11. What is the value of x?</p>
                        </div>
                        <div class="example-card" data-question="What is the current population of India?">
                            <i class="fas fa-globe-asia"></i>
                            <h3>Current Affairs</h3>
                            <p>What is the current population of India?</p>
                        </div>
                        <div class="example-card" data-question="Explain quantum computing in simple terms">
                            <i class="fas fa-microchip"></i>
                            <h3>Technology</h3>
                            <p>Explain quantum computing in simple terms</p>
                        </div>
                    </div>
                </div>
            `;

                chatMessages.innerHTML = '';
                chatMessages.appendChild(welcomeScreen);

                // Add event listeners to example cards
                document.querySelectorAll('.example-card').forEach(card => {
                    card.addEventListener('click', function () {
                        if (!currentChatId) createNewChat();
                        const question = this.getAttribute('data-question');
                        userInput.value = question;
                        userInput.focus();
                    });
                });
            }

            // Message handling functions
            function addMessage(text, isUser, subject) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser ? 'user-message' : 'ai-message');

                if (!isUser && subject) {
                    const subjectTag = document.createElement('span');
                    subjectTag.classList.add('subject-tag');
                    subjectTag.classList.add(`${subject}-tag`);
                    subjectTag.textContent = subject.charAt(0).toUpperCase() + subject.slice(1);
                    messageDiv.appendChild(subjectTag);
                }

                // Preserve line breaks in the response
                const lines = text.split('\n');
                lines.forEach((line, index) => {
                    if (line.trim() !== '') {
                        const p = document.createElement('p');
                        p.textContent = line;
                        if (index > 0) p.style.marginTop = '10px';
                        messageDiv.appendChild(p);
                    }
                });

                chatMessages.appendChild(messageDiv);

                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // If this is part of a chat, save it
                if (currentChatId) {
                    const chat = chats.find(chat => chat.id === currentChatId);
                    if (chat) {
                        chat.messages.push({
                            text,
                            isUser,
                            subject,
                            timestamp: new Date().toISOString()
                        });

                        // Update chat title if it's the first message
                        if (chat.messages.length === 1 && !isUser) {
                            chat.title = text.substring(0, 30) + (text.length > 30 ? '...' : '');
                        }

                        saveChats();
                        renderChatHistory();
                    }
                }
            }

            async function sendMessageText(message) {
                addMessage(message, true);
                userInput.value = "";

                // Show typing indicator
                const typingDiv = document.createElement("div");
                typingDiv.classList.add("message", "ai-message");
                typingDiv.innerHTML = `<p><em>OmniAI is typing...</em></p>`;
                chatMessages.appendChild(typingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                try {
                    // Call backend Gemini API
                    const responseText = await getAIResponse(message);

                    // Remove typing indicator
                    typingDiv.remove();

                    // Add AI response
                    addMessage(responseText, false, "it");
                } catch (error) {
                    // Remove typing indicator
                    typingDiv.remove();

                    // Show error message
                    addMessage("Sorry, I encountered an error while processing your request. Please try again.", false, "it");
                    console.error("Error sending message:", error);
                }
            }

            // Fetch AI response from backend (Gemini API)
            async function getAIResponse(userMessage) {
                try {
                    const res = await fetch("http://localhost:5000/api/chat", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ message: userMessage })
                    });

                    if (!res.ok) {
                        throw new Error(`Server returned ${res.status}: ${res.statusText}`);
                    }

                    const data = await res.json();
                    return data.reply;
                } catch (err) {
                    console.error("API Error:", err);
                    return "Sorry I dosen't know that one, please try again";
                }
            }

            function sendMessage() {
                const message = userInput.value.trim();
                if (!message) return;

                // Create a new chat if none exists
                if (!currentChatId) {
                    createNewChat();
                    // Small delay to allow chat creation
                    setTimeout(() => sendMessageText(message), 100);
                } else {
                    sendMessageText(message);
                }
            }

            // Setup event listeners
            function setupEventListeners() {
                // Send message on button click or Enter key
                sendButton.addEventListener('click', sendMessage);
                userInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') sendMessage();
                });

                // New chat button
                newChatBtn.addEventListener('click', createNewChat);

                // Example cards
                exampleCards.forEach(card => {
                    card.addEventListener('click', function () {
                        if (!currentChatId) createNewChat();
                        const question = this.getAttribute('data-question');
                        userInput.value = question;
                        userInput.focus();
                    });
                });

                // Clear chat button
                clearChatBtn.addEventListener('click', () => {
                    if (currentChatId) {
                        const chat = chats.find(chat => chat.id === currentChatId);
                        if (chat) {
                            chat.messages = [];
                            saveChats();
                            loadChat(currentChatId);
                        }
                    } else {
                        chatMessages.innerHTML = '';
                        addMessage("Chat cleared! Start fresh.", false, "");
                    }
                });
            }

            // Initialize the application when DOM is loaded
            document.addEventListener('DOMContentLoaded', () => {
                initApp();
                setupSidebar();
                setupThemeToggle();
                setupEventListeners();
            });

            //PDF analysis
            // PDF functionality
            const pdfInput = document.getElementById('pdfInput');
            const pdfBtn = document.getElementById('pdf-btn');

            // Setup PDF event listeners
            function setupPDFFunctionality() {
                if (pdfBtn) {
                    pdfBtn.addEventListener('click', () => {
                        pdfInput.click();
                    });
                }

                if (pdfInput) {
                    pdfInput.addEventListener('change', handlePDFUpload);
                }
            }

            // Handle PDF upload
            async function handlePDFUpload(event) {
                const file = event.target.files[0];
                if (!file) return;

                if (file.type !== 'application/pdf') {
                    alert('Please upload a PDF file');
                    return;
                }

                // Create a new chat if none exists
                if (!currentChatId) {
                    createNewChat();
                    // Wait a moment for chat to be created
                    await new Promise(resolve => setTimeout(resolve, 100));
                }

                addMessage(`PDF upload: ${file.name}`, true);

                // Show uploading indicator
                const uploadingDiv = document.createElement("div");
                uploadingDiv.classList.add("message", "ai-message");
                uploadingDiv.innerHTML = `
        <div class="pdf-upload-status">
            <i class="fas fa-file-pdf"></i>
            <span>Uploading and analyzing PDF (${formatFileSize(file.size)})...</span>
        </div>
    `;
                chatMessages.appendChild(uploadingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                try {
                    const formData = new FormData();
                    formData.append('pdf', file);

                    const response = await fetch('http://localhost:5000/api/pdf-summary', {
                        method: 'POST',
                        body: formData
                    });

                    const data = await response.json();

                    if (!response.ok) {
                        throw new Error(data.reply || `Server error: ${response.status}`);
                    }

                    // Remove uploading indicator
                    uploadingDiv.remove();

                    // Add AI response
                    addMessage(data.reply, false, "pdf");
                } catch (error) {
                    console.error('PDF analysis error:', error);

                    // Remove uploading indicator
                    uploadingDiv.remove();

                    // Show error message
                    addMessage(`Error: ${error.message}`, false, "pdf");
                }

                // Reset the file input
                pdfInput.value = '';
            }

            // Helper function to format file size
            function formatFileSize(bytes) {
                if (bytes < 1024) return bytes + ' bytes';
                else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
                else return (bytes / 1048576).toFixed(1) + ' MB';
            }

            // Add this to your initialization function
            function initApp() {
                // ... your existing init code ...
                setupPDFFunctionality(); // Add this line
            }

            // connect with render

            // Instead of localhost
const API_BASE = "https://omni-ai-35gk.onrender.com";  

async function getAIResponse(userMessage) {
  try {
    const res = await fetch(`${API_BASE}/api/chat`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: userMessage })
    });
    const data = await res.json();
    return data.reply;
  } catch (err) {
    console.error(err);
    return "⚠️ Unable to connect to AI server.";
  }
}

        </script>
</body>


</html>



